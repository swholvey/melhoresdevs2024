<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Produtos</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
      integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/css/style.css" />
  </head>
  <body class="pagina-produtos">
    <%- include('partials/menu') -%>
    <main class="p-3">
      <div class="d-flex justify-content-between align-items-center">
        <div>Produtos...</div>
        <div>
          <a class="btn btn-success" href="/produtos/novo"> Novo </a>
          &nbsp;
          <a href="" class="btn btn-outline-secondary"> Filtrar </a>
          &nbsp;
          <a href="" class="btn btn-outline-secondary"> Exportar CSV </a>
          &nbsp;
          <select class="btn btn-outline-secondary">
            <option value="10">10</option>
            <option value="50">50</option>
            <option value="100">100</option>
          </select>
        </div>
      </div>
      <br />
      <% if (produtos.length == 0) { %>
      <div class="alert alert-warning">Nenhum registro encontrado.</div>
      <% } else { %>
      <table>
        <tr>
          <th class="w" data-w="150px">
            <div class="d-flex justify-content-between align-items-center">
              <span> ID </span>
              <ul class="d-flex align-items-center list-unstyled column-gap-1">
                <li>
                  <a
                    href="/produtos?order=asc&column=id"
                    class="btn btn-outline-secondary btn-sm"
                  >
                    <i class="fa-solid fa-sort-up"></i>
                  </a>
                </li>
                <li>
                  <a
                    href="/produtos?order=desc&column=id"
                    class="btn btn-outline-secondary btn-sm"
                  >
                    <i class="fa-solid fa-sort-down"></i>
                  </a>
                </li>
              </ul>
            </div>
          </th>
          <th>
            <div class="d-flex justify-content-between align-items-center">
              <span> Nome </span>
              <ul class="d-flex align-items-center list-unstyled column-gap-1">
                <li>
                  <a
                    href="/produtos?order=asc&column=nome"
                    class="btn btn-outline-secondary btn-sm"
                  >
                    <i class="fa-solid fa-sort-up"></i>
                  </a>
                </li>
                <li>
                  <a
                    href="/produtos?order=desc&column=nome"
                    class="btn btn-outline-secondary btn-sm"
                  >
                    <i class="fa-solid fa-sort-down"></i>
                  </a>
                </li>
              </ul>
            </div>
          </th>
          <th>
            <div class="d-flex justify-content-between align-items-center">
              <span> Valor </span>
              <ul class="d-flex align-items-center list-unstyled column-gap-1">
                <li>
                  <a
                    href="/produtos?order=asc&column=valor"
                    class="btn btn-outline-secondary btn-sm"
                  >
                    <i class="fa-solid fa-sort-up"></i>
                  </a>
                </li>
                <li>
                  <a
                    href="/produtos?order=desc&column=valor"
                    class="btn btn-outline-secondary btn-sm"
                  >
                    <i class="fa-solid fa-sort-down"></i>
                  </a>
                </li>
              </ul>
            </div>
          </th>
          <th>
            <div class="d-flex justify-content-between align-items-center">
              <span> Visível </span>
              <ul class="d-flex align-items-center list-unstyled column-gap-1">
                <li>
                  <a
                    href="/produtos?order=asc&column=visivel"
                    class="btn btn-outline-secondary btn-sm"
                  >
                    <i class="fa-solid fa-sort-up"></i>
                  </a>
                </li>
                <li>
                  <a
                    href="/produtos?order=desc&column=visivel"
                    class="btn btn-outline-secondary btn-sm"
                  >
                    <i class="fa-solid fa-sort-down"></i>
                  </a>
                </li>
              </ul>
            </div>
          </th>
          <th class="text-center w" data-w="250px">Ações</th>
        </tr>
        <% for (let produto of produtos) { %>
        <tr>
          <td><%= produto.id %></td>
          <td><%= produto.nome %></td>
          <td><%= produto.valor %></td>
          <td><%= produto.visivel == '1' ? 'Sim' : 'Não' %></td>
          <td class="text-center">
            <a
              class="btn btn-warning"
              href="/produtos/editar?id=<%= produto.id %>"
            >
              Editar
            </a>
            &nbsp;
            <a
              class="btn btn-danger"
              onclick="confirmaExclusao('<%= produto.id %>')"
            >
              Excluir
            </a>
          </td>
        </tr>
        <% } %>
      </table>
      <div class="mt-2 text-center">
        <a href="" class="btn btn-outline-secondary"> 1 </a>
        <a href="" class="btn btn-outline-secondary"> 2 </a>
      </div>
      <% } %>
    </main>
    <script src="/js/script.js"></script>
    <script>
      function confirmaExclusao(id) {
        let confirmacao = confirm(`Deseja realmente excluir o produto ${id}`);
        if (confirmacao) {
          window.location.replace(`/produtos/excluir?id=${id}`);
        }
      }
    </script>
  </body>
</html>
